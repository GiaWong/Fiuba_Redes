
##  1.5 Protocol Layers and Their Service Models

Cuando hablamos de Internet, no podemos pensar en un solo sistema gigante que hace todo de una sola vez. Para organizar el quilombo, se usan **capas de protocolos**, donde cada capa cumple una función bien definida y se apoya en la de abajo. Esto hace que el diseño sea más ordenado y que se puedan cambiar tecnologías sin romper todo lo demás.

---

###  La idea de las capas

* **Capas = dividir el problema en partes manejables.**
* Cada capa ofrece **servicios a la de arriba** y usa los servicios de la de abajo.
* Ejemplo simple:

  * En un envío de cartas:

    * La persona escribe el mensaje (aplicación).
    * Mete la carta en un sobre con dirección (transporte y red).
    * El cartero la lleva en bici o camión (capa de enlace y física).
  * Cada etapa tiene su responsabilidad, y no le importa cómo la otra hace su tarea.

---

###  El modelo de capas en Internet

El Internet stack tiene **cinco capas principales**:

1. **Aplicación**

   * Donde viven los programas que usamos (ejemplo: navegador, WhatsApp, Netflix).
   * Protocolos: HTTP (web), SMTP (correo), DNS, etc.

2. **Transporte**

   * Se ocupa de que los mensajes viajen entre procesos en distintas máquinas.
   * Protocolos clave:

     * **TCP**: confiable, asegura que todo llegue en orden (ej. videollamadas críticas o envío de archivos).
     * **UDP**: más rápido, pero sin garantías (ej. streaming, juegos online).

3. **Red (Internet layer)**

   * Responsable de mover paquetes desde el origen hasta el destino.
   * Protocolo estrella: **IP** (Internet Protocol).
   * También acá entran protocolos de enrutamiento que deciden por dónde viajan los paquetes.

4. **Enlace de datos (Data Link)**

   * Encargada de mover datos entre dos nodos directamente conectados (ejemplo: tu compu y el router WiFi).
   * Protocolos: Ethernet, WiFi, LTE.
   * Se preocupa de detectar algunos errores y manejar el acceso compartido al medio.

5. **Física**

   * La parte más baja: transmite bits reales a través de cables, fibra óptica o señales de radio.
   * Ejemplo: voltajes en un cable Ethernet, pulsos de luz en fibra óptica, ondas de radio en WiFi/5G.

---

###  El concepto de encapsulación

Cuando una aplicación manda datos:

1. La **aplicación** genera el mensaje (ej. “Hola” en WhatsApp).
2. La **capa de transporte** le agrega su cabecera (ej. puerto de origen/destino).
3. La **capa de red** agrega la dirección IP de origen/destino.
4. La **capa de enlace** agrega su propia info (ej. direcciones MAC).
5. Finalmente la **capa física** convierte todo eso en señales eléctricas, luz o radio.

En el receptor pasa lo mismo pero al revés: se van sacando las “capas de cebolla” hasta que el mensaje llega limpio a la aplicación.

---

###  Beneficio de este enfoque

* Permite que cada capa evolucione sin afectar a las demás.

  * Ejemplo: podés cambiar de WiFi a 5G y tu app de WhatsApp ni se entera.
* Fomenta la estandarización y la interoperabilidad.
* Hace más fácil el diseño, prueba y depuración.

---

El modelo de capas del Internet organiza la comunicación en pasos bien separados. Cada capa ofrece servicios a la de arriba y depende de la de abajo. Gracias a esta división, Internet puede crecer, adaptarse y soportar desde enviar un simple mail hasta hacer streaming 4K en vivo.

---

Ejemplo paso a paso con algo cotidiano: **mandar un mensaje de WhatsApp**.

---

###  Ejemplo: “Hola” por WhatsApp

1. **Capa de Aplicación (WhatsApp)**

   * Vos escribís *“Hola”* y tocás **Enviar**.
   * WhatsApp arma un **mensaje** con tus datos (texto, hora, destinatario).
   * Acá trabajan protocolos de aplicación como HTTP/HTTPS o propios de WhatsApp.

2. **Capa de Transporte (TCP/UDP)**

   * El mensaje se transforma en **segmentos**.
   * Ejemplo: si el mensaje es largo, lo parte en pedacitos.
   * TCP garantiza que todos lleguen y en orden (WhatsApp usa mucho TCP).

3. **Capa de Red (IP)**

   * Ahora cada segmento se mete dentro de un **paquete IP**.
   * Se agrega la **dirección IP** de tu celu (origen) y del servidor de WhatsApp (destino).
   * Ejemplo: como cuando ponés remitente y destinatario en un sobre.

4. **Capa de Enlace de Datos (WiFi, 4G, 5G, Ethernet)**

   * Los paquetes IP bajan a la red local.
   * Tu celu se conecta por **WiFi** (router) o **4G/5G** (antena celular).
   * Acá se usan protocolos como Ethernet (si fuese cableado) o LTE/WiFi.

5. **Capa Física (bits en el medio físico)**

   * Finalmente, todo se convierte en **señales eléctricas, pulsos de luz o ondas de radio**.
   * Esos 1 y 0 viajan por cables, fibra óptica o aire hasta el servidor de WhatsApp.

---

 En el servidor, el proceso se invierte:

* Los bits suben capa por capa → reconstruyen el mensaje → el servidor lo guarda → lo reenvía al destinatario → se repite el mismo viaje pero hacia el celu de tu amigo/a.

---

 **Analogía simple**:

* Aplicación = Escribir la carta (“Hola”).
* Transporte = Cortar la carta en páginas numeradas.
* Red = Poner dirección del sobre (origen/destino).
* Enlace = Elegir el medio (camión, avión, barco).
* Física = El movimiento real (el camión rodando, el avión volando).

---