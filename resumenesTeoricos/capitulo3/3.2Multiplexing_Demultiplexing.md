
##  3.2 Multiplexación y Demultiplexación

###  ¿De qué se trata?

* Cuando los datos viajan por la red, muchos procesos diferentes (programas) dentro de un mismo host quieren usar la capa de transporte al mismo tiempo.
* Ejemplo: en tu compu podés estar en **Zoom**, bajando algo por **uTorrent** y mirando YouTube en Chrome.
   Todos usan la red, pero los datos no pueden mezclarse.

Ahí entran en juego dos funciones claves:

1. **Multiplexación**

   * Juntar datos de distintos procesos de la aplicación y combinarlos en un solo flujo hacia la capa de red (IP).
   * Ejemplo: tu compu arma “paquetitos” que llevan datos de Zoom, YouTube y uTorrent juntos y los manda hacia Internet.

2. **Demultiplexación**

   * En el host receptor, separar los datos entrantes y entregarlos al proceso correcto.
   * Ejemplo: si recibís un video de YouTube y un archivo de WhatsApp, el sistema sabe qué datos darle al navegador y cuáles a WhatsApp, sin confundirlos.

---

###  ¿Cómo funciona? 

Para que la red sepa a qué proceso pertenece cada paquete, se usan **números de puerto** .

* Cada segmento de transporte lleva en su encabezado:

  * **Puerto de origen** (número que identifica al proceso emisor).
  * **Puerto de destino** (número que identifica al proceso receptor).
* Además lleva las direcciones IP de origen y destino.

Esto forma el **socket**:

```
Socket = (Dirección IP, Número de Puerto)
```

Ejemplo:

* Navegar una web: `(200.32.45.10, 443)` → IP del servidor + puerto HTTPS.
* Enviar mail SMTP: `(200.32.45.11, 25)` → IP del servidor de correo + puerto 25.

---

###  Tipos de demultiplexación

1. **Demultiplexación sin conexión (UDP)**

   * UDP solo mira el puerto destino.
   * Si llegan dos paquetes con puerto destino `53` (DNS), los dos van al mismo proceso.
   * No importa el puerto origen ni la IP.
   *  Simple, rápido, pero puede causar mezclas si hay varias conexiones.

2. **Demultiplexación orientada a conexión (TCP)**

   * TCP es más estricto: mira **IP origen, IP destino, puerto origen y puerto destino**.
   * Esto permite diferenciar varias conexiones al mismo servidor y mismo puerto.
   * Ejemplo:

     * Cliente 1: `(IP1, 51514) → (Servidor, 80)`
     * Cliente 2: `(IP2, 51888) → (Servidor, 80)`
       Aunque ambos piden la misma web, TCP los trata como conexiones distintas.

---

### Ejemplo 

Imaginá que en tu edificio hay un solo **portero** (la red).

* **Multiplexación**: los carteros traen cartas de todos lados y las meten en el buzón del edificio.
* **Demultiplexación**: el portero abre el buzón y reparte cada carta al departamento correcto (usando dirección y número de depto = IP + puerto).

---

* **UDP** es como un portero que solo se fija en el número de depto (puerto destino).
* **TCP** es como un portero obsesivo que mira también quién mandó la carta, de dónde vino y si coincide con un registro de “visitas esperadas”.

---
