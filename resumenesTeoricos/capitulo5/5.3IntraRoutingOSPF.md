# 5.3 Intra-AS Routing in the Internet: OSPF



Hasta ahora, vimos los algoritmos de enrutamiento como si todos los routers fueran iguales y trabajaran en conjunto. Pero en la práctica hay **dos problemas**:

1. **Escalabilidad:** el Internet tiene cientos de millones de routers; no podés tener a todos intercambiando info con todos (sería lentísimo y consumiría demasiada memoria).
2. **Autonomía administrativa:** cada ISP quiere manejar su red a su manera, sin revelar detalles internos a otros.

 Solución: dividir en **Autonomous Systems (AS)**. Cada AS usa su **intra-AS protocol** (interno), como OSPF, y se conecta a otros AS mediante protocolos inter-AS (ej. BGP).

---

### ¿Qué es OSPF?

* **Open Shortest Path First** (abierto = especificación pública, definido en RFC 2328).

* Es un **protocolo link-state**, o sea:

  * Cada router comparte el estado de sus enlaces con todos en el AS.
  * Todos tienen la misma visión del mapa de la red.
  * Cada uno corre **Dijkstra** localmente para armar sus tablas.

* Los **costos de los enlaces** los define el administrador:

  * Todos en 1 → rutas mínimo-salto.
  * Inversamente proporcional al ancho de banda → desalentar enlaces lentos.

---

### Funcionalidades clave de OSPF

1. **Difusión de estado de enlace (flooding):**

   * Un router no manda updates solo a vecinos, sino a todos los routers del AS.
   * Se actualiza al cambiar un link o cada 30 min (para robustez).

2. **Seguridad:**

   * Puede autenticarse (simple o con MD5).
   * Evita que routers falsos inyecten rutas malas.

3. **Multipath routing:**

   * Si hay varios caminos con el mismo costo, OSPF puede usarlos todos en paralelo (load balancing).

4. **Soporte de unicast y multicast:**

   * Con MOSPF (Multicast OSPF), que extiende la base de datos de OSPF.

5. **Jerarquía dentro de un AS:**

   * Un AS puede dividirse en **áreas**.
   * Cada área corre su propio OSPF y tiene **Area Border Routers (ABRs)** para conectarse al backbone.
   * El **backbone area** (Área 0) conecta todas las áreas.
   * El tráfico entre áreas siempre pasa por el backbone.

---

### Ejemplo 

Pensá en OSPF como la **red de subtes de Buenos Aires**:

* Cada **línea de subte** es un área interna con sus estaciones (routers).
* Cada línea tiene sus propios mapas y recorridos internos (OSPF intra-area).
* Para viajar de una línea a otra tenés que pasar por una **estación de combinación** (ABR).
* Y siempre, para moverte entre líneas, en algún momento pasás por la **Línea C (el backbone)**, que conecta todo.

---

### Resumen 

* OSPF = protocolo intra-AS más usado, tipo link-state, con flooding + Dijkstra.
* Admin elige los pesos de los enlaces.
* Incluye seguridad, multipath, multicast y jerarquía.
* Jerarquía con áreas y backbone = solución para **escalabilidad** y **organización**.


